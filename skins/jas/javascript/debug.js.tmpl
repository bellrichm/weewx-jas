##    Copyright (c) 2021 Rich Bell <bellrichm@gmail.com>
##    See the file LICENSE.txt for your rights.

window.addEventListener("load", function (event) {
  ## ToDo - proof of concept, charting MQTT data
  #for observation in $observations
    #if "mqtt" in $observations[$observation]["aggregate_types"]
      #set mqtt_data = $observation + "MQTT"
      if (!sessionStorage.getItem('$mqtt_data')) {
        sessionStorage.setItem('$mqtt_data', JSON.stringify([]));
      }
    #end if
  #end for
});

#set global interval_name_global = "mqtt"
#set global year_global = None
#set global month_global = None
#set global interval_long_name_global = $interval_name_global + "_" 

#if $getVar("$Extras.pages." + $page, False)
    #include 'generators/js.gen'
#end if        

#set global interval_name_global = None
#set global year_global = None
#set global month_global = None
#set global interval_long_name_global = None

function copyLog() {
  var log = document.getElementById("jasLog").textContent;
  navigator.clipboard.writeText(log);
}

function clearLog() {
    var jasLog = document.getElementById("jasLog");
        jasLog.innerHTML = "";
}