##    Copyright (c) 2021 Rich Bell <bellrichm@gmail.com>
##    See the file LICENSE.txt for your rights.

var pageCharts = [];

function refreshSizes(){
  #if not $getVar("$Extras.pages." + $page + '.radar', True)
    radarElem = document.getElementById("radar")
    radarElem.style.height = radarElem.offsetWidth / 1.618 + 17  +"px" // adding is a hack
  #end if

  #if $chartEngine == "echarts"
    for (index in pageCharts) {
      chartElem = pageCharts[index].getDom()
      height = chartElem.offsetWidth / 1.618 + 17  +"px" // adding is a hack
      pageCharts[index].resize({width: null, height: height})
    }
  #end if
}

function addConsole(text){
    var jasLog = document.getElementById("jasLog")
    if (jasLog) {
        jasLog.innerHTML = text + "\n<br>" + jasLog.innerHTML;
    }
}

  ## ToDo thiscould be cleaned up
  function setIframeSrc(id, url) {
    currentPage = sessionStorage.getItem('currentPage');
    if (currentPage != url) {
      currentPageId = document.getElementById(currentPage)
      if (currentPageId) {
        currentPageId.classList.remove("active");
      }
      sessionStorage.setItem('currentPage', url)
    }

    document.getElementById(url).classList.add("active");
    document.getElementById(id).src = url;
}
